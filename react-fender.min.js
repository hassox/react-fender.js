require=function e(t,r,s){function a(n,o){if(!r[n]){if(!t[n]){var p="function"==typeof require&&require;if(!o&&p)return p(n,!0);if(i)return i(n,!0);var u=Error("Cannot find module '"+n+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[n]={exports:{}};t[n][0].call(l.exports,function(e){var r=t[n][1][e];return a(r?r:e)},l,l.exports,e,t,r,s)}return r[n].exports}for(var i="function"==typeof require&&require,n=0;s.length>n;n++)a(s[n]);return a}({"./build/message.js":[function(e,t){function r(e){var t,r={id:e.getf("number"),name:e.getf("name"),doc:e.getf("doc")},s=e.getf("options");if(s&&(t=s.getf("fender_field","fender.v1"))){var a=t.asJSON();Object.keys(a).forEach(function(e){r[e]=a[e]})}return r}function s(e,t,r,s,i,n){var o;return o=s?React.DOM.button({className:"remover",onClick:s},"X"):React.DOM.span(null),React.DOM.div({className:"proto-field "+n,"data-error":i},o,React.DOM.label(null,a(t)," ",e),r)}function a(e){return e?React.DOM.span({className:"required"},"*"):React.DOM.span(null)}var i,n={},o=/64$/,p=/(INT|FIXED)/,u=/(UINT|[^S]FIXED)/,l=React.createClass({displayName:"StringField",getInitialState:function(){return{textarea:!!this.props.field.displayAsTextArea}},provideValue:function(){var e=this.refs[this.props.field.getf("number")].getDOMNode().value;e=this.props.field.coerce({},e),this.props.setMessageValue&&this.props.setMessageValue(e)},render:function(){var e,t=this.props.field,s=r(t),a=(this.props.message,this.props.value),i=!(!t.required&&!s.present);return e=this.state.textarea?React.DOM.textarea({ref:s.id,placeholder:s.name,required:i,onChange:this.provideValue},a):React.DOM.input({type:"text",ref:s.id,placeholder:s.name,value:a,required:i,onChange:this.provideValue})}}),d=React.createClass({displayName:"NumericField",getInitialState:function(){return{value:this.props.value&&""+this.props.value}},storeState:function(){var e=this.refs[this.props.field.getf("number")].getDOMNode().value;this.setState({value:e})},provideValue:function(){this.props.setMessageValue&&this.props.setMessageValue(this.props.field.coerce({},this.state.value))},render:function(){var e=this.props.field,t=r(e),s=this.state.value,a=e.fieldType,i=(!(!e.required&&!t.present),o.test(a),p.test(a)),n=u.test(a),l={type:"number",ref:t.id};return t.hasOwnProperty("max")&&(l.max=t.max),t.hasOwnProperty("min")&&(l.min=t.min),s&&s.toString&&(s=""+s),l.value=s,n&&!t.min&&(l.min=0),l.step=i?1:"any",l.onBlur=this.provideValue,l.onChange=this.storeState,new React.DOM.input(l)}}),c=React.createClass({displayName:"EnumField",provideValue:function(){var e=this.refs[this.props.field.getf("number")].getDOMNode().value;e=this.props.field.coerce({},e),this.props.setMessageValue&&this.props.setMessageValue(e)},componentDidMount:function(){var e=this.refs[this.props.field.getf("number")].getDOMNode().value,t=this.props.value&&this.props.value.name;e!=t&&this.provideValue()},render:function(){var e=this.props.field,t=r(e),s=this.props.value,a=!(!e.required&&!t.present),i=(e.concrete.fullName,Object.keys(e.concrete.v)),n=[];return s&&(s=s.name||s),a||n.push(React.DOM.option({key:"not-set"})),i.forEach(function(e){n.push(React.DOM.option({value:e,key:e},e))}),React.DOM.select({ref:t.id,value:s,onChange:this.provideValue},n)}}),f=React.createClass({displayName:"BoolField",provideValue:function(){var e=this.refs[this.props.field.getf("number")].getDOMNode().checked;e=this.props.field.coerce({},e),this.props.setMessageValue&&this.props.setMessageValue(e)},render:function(){var e=this.props.field,t=r(e),s=!!this.props.value;return!(!e.required&&!t.present),React.DOM.input({ref:t.id,type:"checkbox",value:"true",checked:s,onChange:this.provideValue})}}),h=React.createClass({displayName:"MessageField",getInitialState:function(){return{msg:this.props.value}},createNew:function(){var e=this.props.field,t=e.descriptor.concrete,r=new t;this.props.setMessageValue&&this.props.setMessageValue(r),this.setState({msg:r})},render:function(){var e=this.props.field,t=r(e),s=this.state.msg;return!(!e.required&&!t.present),s?new i({message:s,remover:this.props.remover}):React.DOM.span({onClick:this.createNew},"+")}}),m=React.createClass({displayName:"BytesField",render:function(){return React.DOM.span({className:"not-supported"},"Bytes fields not supported")}});["TYPE_DOUBLE","TYPE_FLOAT","TYPE_INT32","TYPE_INT64","TYPE_UINT32","TYPE_UINT64","TYPE_FIXED32","TYPE_FIXED64","TYPE_SFIXED32","TYPE_SFIXED64","TYPE_SINT32","TYPE_SINT64"].forEach(function(e){n[e]=d}),n.TYPE_STRING=l,n.TYPE_ENUM=c,n.TYPE_BOOL=f,n.TYPE_MESSAGE=h,n.TYPE_BYTES=m;var v=React.createClass({displayName:"SingleField",render:function(){if(!this.props.field)return React.DOM.span(null);var e,t,a,i,o=r(this.props.field),p=!(!o.required&&!o.present),u=this.props.error;return t=function(e){this.props.message.setf(e,this.props.field.getf("number")),this.setState({time:(new Date).valueOf()})}.bind(this),u&&u.error_types&&u.error_types.length?(i=u.error_types.join(","),a="validation-error"):(i=null,a=""),e=new n[this.props.field.fieldType]({field:this.props.field,value:this.props.message.getf(this.props.field.getf("number")),message:this.props.message,setMessageValue:t,error:this.props.error}),s(o.name,p,e,this.props.remover,i,a)}}),g=React.createClass({displayName:"RepeatedField",addNew:function(){var e,t=this.props.field,r=(this.props.message,this.props.value);"TYPE_MESSAGE"==t.fieldType&&(e=new t.descriptor.concrete),e=e||"",e.key=(new Date).valueOf(),r.push(e),this.setState({time:(new Date).valueOf()})},render:function(){var e,t,s=this.props.field,i=r(s),o=n[s.fieldType],p=(this.props.field.repeated,this.props.value),u=!(!s.required&&!i.preset),l=[],d=this.props.error;return p.forEach(function(e,t){var r=function(){var e=this.props.value;e.splice(t,1),this.setState({time:(new Date).valueOf()})}.bind(this),a=function(e){var r=this.props.value;r[t]=e,this.setState({time:(new Date).valueOf()})}.bind(this);l.push(new o({field:s,value:e,remover:r,key:e.key,setMessageValue:a}))}.bind(this)),d&&d.error_types&&d.error_types.length?(t=d.error_types.join(","),e="validation-error"):(t=null,e=""),React.DOM.div({className:"proto-field "+(e||""),"data-errors":t},React.DOM.label(null,a(u)," ",i.name," ",React.DOM.span({className:"add-new",onClick:this.addNew},"+")),React.DOM.fieldset({className:"proto-field"},l))}}),M=React.createClass({displayName:"Field",render:function(){if(!this.props.field)return React.DOM.span(null);var e=r(this.props.field),t=this.props.field.repeated,s=this.props.message.getf(e.id);return t?new g({field:this.props.field,value:s,remover:this.props.remover,message:this.props.message,error:this.props.error}):new v({field:this.props.field,value:s,remover:this.props.remover,message:this.props.message,error:this.props.error})}}),i=React.createClass({displayName:"Message",render:function(){var e=this.props.message;if(!e)return React.DOM.div({className:"Message"},"No Class");if(!e.isMessage())return React.DOM.div({className:"Message"},"Not a message");var t=[],r={};(this.props.errors&&this.props.errors.errors||[]).forEach(function(e){var t=[e.field.name,e.field.package].join("#");r[t]=e}),e.constructor.orderedFields.forEach(function(s){var a=s.getf("name"),i=s.getf("number"),n=e.constructor.fullName+a+i,o=r[[a,s.package].join("#")];t.push(new M({field:s,message:e,key:n,error:o}))});var s;return s=this.props.remover?React.DOM.button({className:"remover",onClick:this.props.remover},"X"):React.DOM.span(null),React.DOM.fieldset({className:"Message"},s,t)}});React.createClass({displayName:"MessageForm",getInitialState:function(){return{errors:void 0}},handleSubmit:function(e){e.preventDefault();var t;if(this.props.message.fenderValidate){if(t=this.props.message.fenderValidate().asJSON(),!t.valid)return this.setState({errors:t}),this.props.onSubmit&&this.props.onSubmit(t),void 0;this.setState({errors:void 0})}return this.props.onSubmit&&this.props.onSubmit(null,this.props.message),!1},render:function(){var e=this.props.message;return React.DOM.form({onSubmit:this.handleSubmit,className:"messageForm"},i({message:e,errors:this.state.errors}),React.DOM.input({type:"submit",value:"Go!"}))}}),"undefined"!=typeof window?window.Message=i:t!==void 0&&(t.exports=i)},{}],duplexer:[function(e,t){function r(e,t){if(e.forEach)return e.forEach(t);for(var r=0;e.length>r;r++)t(e[r],r)}function s(e,t){function s(t){function r(){return e[t].apply(e,arguments)}f[t]=r}function u(e){function r(){f.emit(e);var r=t[e];return r?r.apply(t,arguments):(t.emit(e),void 0)}f[e]=r}function l(e){function r(){var t=p.call(arguments);t.unshift(e),f.emit.apply(f,t)}t.on(e,r)}function d(){if(!h){h=!0;var e=p.call(arguments);e.unshift("end"),f.emit.apply(f,e)}}function c(e){f.emit("error",e)}var f=new a,h=!1;return r(i,s),r(n,u),r(o,l),t.on("end",d),e.on("drain",function(){f.emit("drain")}),e.on("error",c),t.on("error",c),f.writable=e.writable,f.readable=t.readable,f}var a=e("stream"),i=["write","end","destroy"],n=["resume","pause"],o=["data","close"],p=Array.prototype.slice;t.exports=s},{stream:void 0}],through:[function(e,t,r){function s(e,t,r){function s(){for(;p.length&&!l.paused;){var e=p.shift();if(null===e)return l.emit("end");l.emit("data",e)}}function i(){l.writable=!1,t.call(l),!l.readable&&l.autoDestroy&&l.destroy()}e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var n=!1,o=!1,p=[],u=!1,l=new a;return l.readable=l.writable=!0,l.paused=!1,l.autoDestroy=!(r&&r.autoDestroy===!1),l.write=function(t){return e.call(this,t),!l.paused},l.queue=l.push=function(e){return u?l:(null==e&&(u=!0),p.push(e),s(),l)},l.on("end",function(){l.readable=!1,!l.writable&&l.autoDestroy&&process.nextTick(function(){l.destroy()})}),l.end=function(e){return n?void 0:(n=!0,arguments.length&&l.write(e),i(),l)},l.destroy=function(){return o?void 0:(o=!0,n=!0,p.length=0,l.writable=l.readable=!1,l.emit("close"),l)},l.pause=function(){return l.paused?void 0:(l.paused=!0,l)},l.resume=function(){return l.paused&&(l.paused=!1,l.emit("resume")),s(),l.paused||l.emit("drain"),l},l}var a=e("stream");r=t.exports=s,s.through=s},{stream:void 0}]},{},[]);